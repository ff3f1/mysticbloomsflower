<!DOCTYPE html>
<html lang="ru" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MysticBlooms üå∏</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              mystic: '#6B21A8',
              background: '#1e1b2e',
              card: '#2e2a44',
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-background text-white min-h-screen font-sans">
    <div class="container mx-auto p-4">
      <h1 class="text-4xl font-bold text-mystic mb-6 text-center">MysticBlooms üå∏</h1>
      <div id="posts" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </div>

    <script>
      async function loadPosts() {
        const res = await fetch('./posts.json');
        const posts = await res.json();
        const container = document.getElementById('posts');

        posts.slice(0, 30).forEach((post) => {
          const card = document.createElement('div');
          card.className = 'bg-card rounded-2xl shadow-lg p-4 hover:scale-105 transform transition-all duration-300 cursor-pointer';

          let mediaContent = '';
          if (post.media?.length > 1) {
            mediaContent += '<div class="flex overflow-x-scroll gap-2 pb-2">';
            post.media.forEach((img) => {
              mediaContent += `<img src="${img}" class="h-40 rounded-lg flex-shrink-0" />`;
            });
            mediaContent += '</div>';
          } else if (post.media?.length === 1) {
            mediaContent = `<img src="${post.media[0]}" class="w-full h-48 object-cover rounded-xl mb-2">`;
          }

          card.innerHTML = `
            ${mediaContent}
            <p class="text-sm text-gray-300">${post.text?.slice(0, 100) || '–ë–µ–∑ —Ç–µ–∫—Å—Ç–∞'}...</p>
          `;

          card.onclick = () => {
            localStorage.setItem('mysticPost', JSON.stringify(post));
            window.location.href = './post.html';
          };

          container.appendChild(card);
        });
      }

      loadPosts();
    </script>
  </body>
</html>
